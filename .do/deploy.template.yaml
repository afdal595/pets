spec:
  name: pet-guild
  services:
    - name: web
      git:
        branch: master
        repo_clone_url: https://github.com/afdal595/pets.git
      build_command: |
        composer install --no-dev
        npm install
        npm run build
        php artisan migrate --force
      run_command: heroku-php-apache2 public/
      envs:
        - key: APP_NAME
          value: "Pet Guild"
        - key: APP_ENV
          value: production
        - key: APP_DEBUG
          value: "false"
        - key: APP_KEY
          value: ${APP_KEY}
        - key: APP_URL
          value: ${APP_URL}
        - key: DB_CONNECTION
          value: mysql
        - key: DB_HOST
          value: ${db.HOSTNAME}
        - key: DB_PORT
          value: ${db.PORT}
        - key: DB_DATABASE
          value: ${db.DATABASE}
        - key: DB_USERNAME
          value: ${db.USERNAME}
        - key: DB_PASSWORD
          value: ${db.PASSWORD}
        - key: CACHE_DRIVER
          value: file
        - key: SESSION_DRIVER
          value: database
        - key: QUEUE_CONNECTION
          value: database
    databases:
      - name: db
        engine: MYSQL
        version: "8"
